  [1] "function (package, help, pos = 2, lib.loc = NULL, character.only = FALSE, "                                      
  [2] "    logical.return = FALSE, warn.conflicts, quietly = FALSE, "                                                   
  [3] "    verbose = getOption(\"verbose\"), mask.ok, exclude, include.only, "                                          
  [4] "    attach.required = missing(include.only)) "                                                                   
  [5] "{"                                                                                                               
  [6] "    conf.ctrl <- getOption(\"conflicts.policy\")"                                                                
  [7] "    if (is.character(conf.ctrl)) "                                                                               
  [8] "        conf.ctrl <- switch(conf.ctrl, strict = list(error = TRUE, "                                             
  [9] "            warn = FALSE), depends.ok = list(error = TRUE, generics.ok = TRUE, "                                 
 [10] "            can.mask = c(\"base\", \"methods\", \"utils\", \"grDevices\", "                                      
 [11] "                \"graphics\", \"stats\"), depends.ok = TRUE), warning(gettextf(\"unknown conflict policy: %s\", "
 [12] "            sQuote(conf.ctrl)), call. = FALSE, domain = NA))"                                                    
 [13] "    if (!is.list(conf.ctrl)) "                                                                                   
 [14] "        conf.ctrl <- NULL"                                                                                       
 [15] "    stopOnConflict <- isTRUE(conf.ctrl$error)"                                                                   
 [16] "    if (missing(warn.conflicts)) "                                                                               
 [17] "        warn.conflicts <- !isFALSE(conf.ctrl$warn)"                                                              
 [18] "    if (!missing(include.only) && !missing(exclude)) "                                                           
 [19] "        stop(\"only one of 'include.only' and 'exclude' can be used\", "                                         
 [20] "            call. = FALSE)"                                                                                      
 [21] "    testRversion <- function(pkgInfo, pkgname, pkgpath) {"                                                       
 [22] "        if (is.null(built <- pkgInfo$Built)) "                                                                   
 [23] "            stop(gettextf(\"package %s has not been installed properly\\n\", "                                   
 [24] "                sQuote(pkgname)), call. = FALSE, domain = NA)"                                                   
 [25] "        R_version_built_under <- as.numeric_version(built$R)"                                                    
 [26] "        if (R_version_built_under < \"3.0.0\") "                                                                 
 [27] "            stop(gettextf(\"package %s was built before R 3.0.0: please re-install it\", "                       
 [28] "                sQuote(pkgname)), call. = FALSE, domain = NA)"                                                   
 [29] "        current <- getRversion()"                                                                                
 [30] "        if (length(Rdeps <- pkgInfo$Rdepends2)) {"                                                               
 [31] "            for (dep in Rdeps) if (length(dep) > 1L) {"                                                          
 [32] "                target <- dep$version"                                                                           
 [33] "                res <- do.call(dep$op, if (is.character(target)) "                                               
 [34] "                  list(as.numeric(R.version[[\"svn rev\"]]), as.numeric(sub(\"^r\", "                            
 [35] "                    \"\", target)))"                                                                             
 [36] "                else list(current, as.numeric_version(target)))"                                                 
 [37] "                if (!res) "                                                                                      
 [38] "                  stop(gettextf(\"This is R %s, package %s needs %s %s\", "                                      
 [39] "                    current, sQuote(pkgname), dep$op, target), "                                                 
 [40] "                    call. = FALSE, domain = NA)"                                                                 
 [41] "            }"                                                                                                   
 [42] "        }"                                                                                                       
 [43] "        if (R_version_built_under > current) "                                                                   
 [44] "            warning(gettextf(\"package %s was built under R version %s\", "                                      
 [45] "                sQuote(pkgname), as.character(built$R)), call. = FALSE, "                                        
 [46] "                domain = NA)"                                                                                    
 [47] "        platform <- built$Platform"                                                                              
 [48] "        r_arch <- .Platform$r_arch"                                                                              
 [49] "        if (.Platform$OS.type == \"unix\") {"                                                                    
 [50] "        }"                                                                                                       
 [51] "        else {"                                                                                                  
 [52] "            if (nzchar(platform) && !grepl(\"mingw\", platform)) "                                               
 [53] "                stop(gettextf(\"package %s was built for %s\", "                                                 
 [54] "                  sQuote(pkgname), platform), call. = FALSE, "                                                   
 [55] "                  domain = NA)"                                                                                  
 [56] "        }"                                                                                                       
 [57] "        if (nzchar(r_arch) && file.exists(file.path(pkgpath, "                                                   
 [58] "            \"libs\")) && !file.exists(file.path(pkgpath, \"libs\", "                                            
 [59] "            r_arch))) "                                                                                          
 [60] "            stop(gettextf(\"package %s is not installed for 'arch = %s'\", "                                     
 [61] "                sQuote(pkgname), r_arch), call. = FALSE, domain = NA)"                                           
 [62] "    }"                                                                                                           
 [63] "    checkNoGenerics <- function(env, pkg) {"                                                                     
 [64] "        nenv <- env"                                                                                             
 [65] "        ns <- .getNamespace(as.name(pkg))"                                                                       
 [66] "        if (!is.null(ns)) "                                                                                      
 [67] "            nenv <- asNamespace(ns)"                                                                             
 [68] "        if (exists(\".noGenerics\", envir = nenv, inherits = FALSE)) "                                           
 [69] "            TRUE"                                                                                                
 [70] "        else {"                                                                                                  
 [71] "            !any(startsWith(names(env), \".__T\"))"                                                              
 [72] "        }"                                                                                                       
 [73] "    }"                                                                                                           
 [74] "    checkConflicts <- function(package, pkgname, pkgpath, nogenerics, "                                          
 [75] "        env) {"                                                                                                  
 [76] "        dont.mind <- c(\"last.dump\", \"last.warning\", \".Last.value\", "                                       
 [77] "            \".Random.seed\", \".Last.lib\", \".onDetach\", \".packageName\", "                                  
 [78] "            \".noGenerics\", \".required\", \".no_S3_generics\", \".Depends\", "                                 
 [79] "            \".requireCachedGenerics\")"                                                                         
 [80] "        sp <- search()"                                                                                          
 [81] "        lib.pos <- which(sp == pkgname)"                                                                         
 [82] "        ob <- names(as.environment(lib.pos))"                                                                    
 [83] "        if (!nogenerics) {"                                                                                      
 [84] "            these <- ob[startsWith(ob, \".__T__\")]"                                                             
 [85] "            gen <- gsub(\".__T__(.*):([^:]+)\", \"\\\\1\", these)"                                               
 [86] "            from <- gsub(\".__T__(.*):([^:]+)\", \"\\\\2\", these)"                                              
 [87] "            gen <- gen[from != package]"                                                                         
 [88] "            ob <- ob[!(ob %in% gen)]"                                                                            
 [89] "        }"                                                                                                       
 [90] "        ipos <- seq_along(sp)[-c(lib.pos, match(c(\"Autoloads\", "                                               
 [91] "            \"CheckExEnv\"), sp, 0L))]"                                                                          
 [92] "        cpos <- NULL"                                                                                            
 [93] "        conflicts <- vector(\"list\", 0)"                                                                        
 [94] "        for (i in ipos) {"                                                                                       
 [95] "            obj.same <- match(names(as.environment(i)), ob, nomatch = 0L)"                                       
 [96] "            if (any(obj.same > 0L)) {"                                                                           
 [97] "                same <- ob[obj.same]"                                                                            
 [98] "                same <- same[!(same %in% dont.mind)]"                                                            
 [99] "                Classobjs <- which(startsWith(same, \".__\"))"                                                   
[100] "                if (length(Classobjs)) "                                                                         
[101] "                  same <- same[-Classobjs]"                                                                      
[102] "                same.isFn <- function(where) vapply(same, exists, "                                              
[103] "                  NA, where = where, mode = \"function\", inherits = FALSE)"                                     
[104] "                same <- same[same.isFn(i) == same.isFn(lib.pos)]"                                                
[105] "                not.Ident <- function(ch, TRAFO = identity, ...) vapply(ch, "                                    
[106] "                  function(.) !identical(TRAFO(get(., i)), TRAFO(get(., "                                        
[107] "                    lib.pos)), ...), NA)"                                                                        
[108] "                if (length(same)) "                                                                              
[109] "                  same <- same[not.Ident(same)]"                                                                 
[110] "                if (length(same) && identical(sp[i], \"package:base\")) "                                        
[111] "                  same <- same[not.Ident(same, ignore.environment = TRUE)]"                                      
[112] "                if (length(same)) {"                                                                             
[113] "                  conflicts[[sp[i]]] <- same"                                                                    
[114] "                  cpos[sp[i]] <- i"                                                                              
[115] "                }"                                                                                               
[116] "            }"                                                                                                   
[117] "        }"                                                                                                       
[118] "        if (length(conflicts)) {"                                                                                
[119] "            if (stopOnConflict) {"                                                                               
[120] "                emsg <- \"\""                                                                                    
[121] "                pkg <- names(conflicts)"                                                                         
[122] "                notOK <- vector(\"list\", 0)"                                                                    
[123] "                for (i in seq_along(conflicts)) {"                                                               
[124] "                  pkgname <- sub(\"^package:\", \"\", pkg[i])"                                                   
[125] "                  if (pkgname %in% canMaskEnv$canMask) "                                                         
[126] "                    next"                                                                                        
[127] "                  same <- conflicts[[i]]"                                                                        
[128] "                  if (is.list(mask.ok)) "                                                                        
[129] "                    myMaskOK <- mask.ok[[pkgname]]"                                                              
[130] "                  else myMaskOK <- mask.ok"                                                                      
[131] "                  if (isTRUE(myMaskOK)) "                                                                        
[132] "                    same <- NULL"                                                                                
[133] "                  else if (is.character(myMaskOK)) "                                                             
[134] "                    same <- setdiff(same, myMaskOK)"                                                             
[135] "                  if (length(same)) {"                                                                           
[136] "                    notOK[[pkg[i]]] <- same"                                                                     
[137] "                    msg <- .maskedMsg(sort(same), pkg = sQuote(pkg[i]), "                                        
[138] "                      by = cpos[i] < lib.pos)"                                                                   
[139] "                    emsg <- paste(emsg, msg, sep = \"\\n\")"                                                     
[140] "                  }"                                                                                             
[141] "                }"                                                                                               
[142] "                if (length(notOK)) {"                                                                            
[143] "                  msg <- gettextf(\"Conflicts attaching package %s:\\n%s\", "                                    
[144] "                    sQuote(package), emsg)"                                                                      
[145] "                  stop(errorCondition(msg, package = package, "                                                  
[146] "                    conflicts = conflicts, class = \"packageConflictError\"))"                                   
[147] "                }"                                                                                               
[148] "            }"                                                                                                   
[149] "            if (warn.conflicts) {"                                                                               
[150] "                packageStartupMessage(gettextf(\"\\nAttaching package: %s\\n\", "                                
[151] "                  sQuote(package)), domain = NA)"                                                                
[152] "                pkg <- names(conflicts)"                                                                         
[153] "                for (i in seq_along(conflicts)) {"                                                               
[154] "                  msg <- .maskedMsg(sort(conflicts[[i]]), pkg = sQuote(pkg[i]), "                                
[155] "                    by = cpos[i] < lib.pos)"                                                                     
[156] "                  packageStartupMessage(msg, domain = NA)"                                                       
[157] "                }"                                                                                               
[158] "            }"                                                                                                   
[159] "        }"                                                                                                       
[160] "    }"                                                                                                           
[161] "    if (verbose && quietly) "                                                                                    
[162] "        message(\"'verbose' and 'quietly' are both true; being verbose then ..\")"                               
[163] "    if (!missing(package)) {"                                                                                    
[164] "        if (is.null(lib.loc)) "                                                                                  
[165] "            lib.loc <- .libPaths()"                                                                              
[166] "        lib.loc <- lib.loc[dir.exists(lib.loc)]"                                                                 
[167] "        if (!character.only) "                                                                                   
[168] "            package <- as.character(substitute(package))"                                                        
[169] "        if (length(package) != 1L) "                                                                             
[170] "            stop(\"'package' must be of length 1\")"                                                             
[171] "        if (is.na(package) || (package == \"\")) "                                                               
[172] "            stop(\"invalid package name\")"                                                                      
[173] "        pkgname <- paste0(\"package:\", package)"                                                                
[174] "        newpackage <- is.na(match(pkgname, search()))"                                                           
[175] "        if (newpackage) {"                                                                                       
[176] "            pkgpath <- find.package(package, lib.loc, quiet = TRUE, "                                            
[177] "                verbose = verbose)"                                                                              
[178] "            if (length(pkgpath) == 0L) {"                                                                        
[179] "                if (length(lib.loc) && !logical.return) "                                                        
[180] "                  stop(packageNotFoundError(package, lib.loc, "                                                  
[181] "                    sys.call()))"                                                                                
[182] "                txt <- if (length(lib.loc)) "                                                                    
[183] "                  gettextf(\"there is no package called %s\", sQuote(package))"                                  
[184] "                else gettext(\"no library trees found in 'lib.loc'\")"                                           
[185] "                if (logical.return) {"                                                                           
[186] "                  if (!quietly) "                                                                                
[187] "                    warning(txt, domain = NA)"                                                                   
[188] "                  return(FALSE)"                                                                                 
[189] "                }"                                                                                               
[190] "                else stop(txt, domain = NA)"                                                                     
[191] "            }"                                                                                                   
[192] "            which.lib.loc <- normalizePath(dirname(pkgpath), "                                                   
[193] "                \"/\", TRUE)"                                                                                    
[194] "            pfile <- system.file(\"Meta\", \"package.rds\", package = package, "                                 
[195] "                lib.loc = which.lib.loc)"                                                                        
[196] "            if (!nzchar(pfile)) "                                                                                
[197] "                stop(gettextf(\"%s is not a valid installed package\", "                                         
[198] "                  sQuote(package)), domain = NA)"                                                                
[199] "            pkgInfo <- readRDS(pfile)"                                                                           
[200] "            testRversion(pkgInfo, package, pkgpath)"                                                             
[201] "            if (is.character(pos)) {"                                                                            
[202] "                npos <- match(pos, search())"                                                                    
[203] "                if (is.na(npos)) {"                                                                              
[204] "                  warning(gettextf(\"%s not found on search path, using pos = 2\", "                             
[205] "                    sQuote(pos)), domain = NA)"                                                                  
[206] "                  pos <- 2"                                                                                      
[207] "                }"                                                                                               
[208] "                else pos <- npos"                                                                                
[209] "            }"                                                                                                   
[210] "            deps <- unique(names(pkgInfo$Depends))"                                                              
[211] "            depsOK <- isTRUE(conf.ctrl$depends.ok)"                                                              
[212] "            if (depsOK) {"                                                                                       
[213] "                canMaskEnv <- dynGet(\"__library_can_mask__\", "                                                 
[214] "                  NULL)"                                                                                         
[215] "                if (is.null(canMaskEnv)) {"                                                                      
[216] "                  canMaskEnv <- new.env()"                                                                       
[217] "                  canMaskEnv$canMask <- union(\"base\", conf.ctrl$can.mask)"                                     
[218] "                  \"__library_can_mask__\" <- canMaskEnv"                                                        
[219] "                }"                                                                                               
[220] "                canMaskEnv$canMask <- unique(c(package, deps, "                                                  
[221] "                  canMaskEnv$canMask))"                                                                          
[222] "            }"                                                                                                   
[223] "            else canMaskEnv <- NULL"                                                                             
[224] "            if (attach.required) "                                                                               
[225] "                .getRequiredPackages2(pkgInfo, quietly = quietly)"                                               
[226] "            cr <- conflictRules(package)"                                                                        
[227] "            if (missing(mask.ok)) "                                                                              
[228] "                mask.ok <- cr$mask.ok"                                                                           
[229] "            if (missing(exclude)) "                                                                              
[230] "                exclude <- cr$exclude"                                                                           
[231] "            if (packageHasNamespace(package, which.lib.loc)) {"                                                  
[232] "                if (isNamespaceLoaded(package)) {"                                                               
[233] "                  newversion <- as.numeric_version(pkgInfo$DESCRIPTION[\"Version\"])"                            
[234] "                  oldversion <- as.numeric_version(getNamespaceVersion(package))"                                
[235] "                  if (newversion != oldversion) {"                                                               
[236] "                    tryCatch(unloadNamespace(package), error = function(e) {"                                    
[237] "                      P <- if (!is.null(cc <- conditionCall(e))) "                                               
[238] "                        paste(\"Error in\", deparse(cc)[1L], \": \")"                                            
[239] "                      else \"Error : \""                                                                         
[240] "                      stop(gettextf(\"Package %s version %s cannot be unloaded:\\n %s\", "                       
[241] "                        sQuote(package), oldversion, paste0(P, "                                                 
[242] "                          conditionMessage(e), \"\\n\")), domain = NA)"                                          
[243] "                    })"                                                                                          
[244] "                  }"                                                                                             
[245] "                }"                                                                                               
[246] "                tt <- tryCatch({"                                                                                
[247] "                  attr(package, \"LibPath\") <- which.lib.loc"                                                   
[248] "                  ns <- loadNamespace(package, lib.loc)"                                                         
[249] "                  env <- attachNamespace(ns, pos = pos, deps, "                                                  
[250] "                    exclude, include.only)"                                                                      
[251] "                }, error = function(e) {"                                                                        
[252] "                  P <- if (!is.null(cc <- conditionCall(e))) "                                                   
[253] "                    paste(\" in\", deparse(cc)[1L])"                                                             
[254] "                  else \"\""                                                                                     
[255] "                  msg <- gettextf(\"package or namespace load failed for %s%s:\\n %s\", "                        
[256] "                    sQuote(package), P, conditionMessage(e))"                                                    
[257] "                  if (logical.return && !quietly) "                                                              
[258] "                    message(paste(\"Error:\", msg), domain = NA)"                                                
[259] "                  else stop(msg, call. = FALSE, domain = NA)"                                                    
[260] "                })"                                                                                              
[261] "                if (logical.return && is.null(tt)) "                                                             
[262] "                  return(FALSE)"                                                                                 
[263] "                attr(package, \"LibPath\") <- NULL"                                                              
[264] "                {"                                                                                               
[265] "                  on.exit(detach(pos = pos))"                                                                    
[266] "                  nogenerics <- !.isMethodsDispatchOn() || checkNoGenerics(env, "                                
[267] "                    package)"                                                                                    
[268] "                  if (isFALSE(conf.ctrl$generics.ok) || (stopOnConflict && "                                     
[269] "                    !isTRUE(conf.ctrl$generics.ok))) "                                                           
[270] "                    nogenerics <- TRUE"                                                                          
[271] "                  if (stopOnConflict || (warn.conflicts && !exists(\".conflicts.OK\", "                          
[272] "                    envir = env, inherits = FALSE))) "                                                           
[273] "                    checkConflicts(package, pkgname, pkgpath, "                                                  
[274] "                      nogenerics, ns)"                                                                           
[275] "                  on.exit()"                                                                                     
[276] "                  if (logical.return) "                                                                          
[277] "                    return(TRUE)"                                                                                
[278] "                  else return(invisible(.packages()))"                                                           
[279] "                }"                                                                                               
[280] "            }"                                                                                                   
[281] "            else stop(gettextf(\"package %s does not have a namespace and should be re-installed\", "            
[282] "                sQuote(package)), domain = NA)"                                                                  
[283] "        }"                                                                                                       
[284] "        if (verbose && !newpackage) "                                                                            
[285] "            warning(gettextf(\"package %s already present in search()\", "                                       
[286] "                sQuote(package)), domain = NA)"                                                                  
[287] "    }"                                                                                                           
[288] "    else if (!missing(help)) {"                                                                                  
[289] "        if (!character.only) "                                                                                   
[290] "            help <- as.character(substitute(help))"                                                              
[291] "        pkgName <- help[1L]"                                                                                     
[292] "        pkgPath <- find.package(pkgName, lib.loc, verbose = verbose)"                                            
[293] "        docFiles <- c(file.path(pkgPath, \"Meta\", \"package.rds\"), "                                           
[294] "            file.path(pkgPath, \"INDEX\"))"                                                                      
[295] "        if (file.exists(vignetteIndexRDS <- file.path(pkgPath, "                                                 
[296] "            \"Meta\", \"vignette.rds\"))) "                                                                      
[297] "            docFiles <- c(docFiles, vignetteIndexRDS)"                                                           
[298] "        pkgInfo <- vector(\"list\", 3L)"                                                                         
[299] "        readDocFile <- function(f) {"                                                                            
[300] "            if (basename(f) %in% \"package.rds\") {"                                                             
[301] "                txt <- readRDS(f)$DESCRIPTION"                                                                   
[302] "                if (\"Encoding\" %in% names(txt)) {"                                                             
[303] "                  to <- if (Sys.getlocale(\"LC_CTYPE\") == \"C\") "                                              
[304] "                    \"ASCII//TRANSLIT\""                                                                         
[305] "                  else \"\""                                                                                     
[306] "                  tmp <- try(iconv(txt, from = txt[\"Encoding\"], "                                              
[307] "                    to = to))"                                                                                   
[308] "                  if (!inherits(tmp, \"try-error\")) "                                                           
[309] "                    txt <- tmp"                                                                                  
[310] "                  else warning(\"'DESCRIPTION' has an 'Encoding' field and re-encoding is not possible\", "      
[311] "                    call. = FALSE)"                                                                              
[312] "                }"                                                                                               
[313] "                nm <- paste0(names(txt), \":\")"                                                                 
[314] "                formatDL(nm, txt, indent = max(nchar(nm, \"w\")) + "                                             
[315] "                  3L)"                                                                                           
[316] "            }"                                                                                                   
[317] "            else if (basename(f) %in% \"vignette.rds\") {"                                                       
[318] "                txt <- readRDS(f)"                                                                               
[319] "                if (is.data.frame(txt) && nrow(txt)) "                                                           
[320] "                  cbind(basename(gsub(\"\\\\.[[:alpha:]]+$\", \"\", "                                            
[321] "                    txt$File)), paste(txt$Title, paste0(rep.int(\"(source\", "                                   
[322] "                    NROW(txt)), ifelse(nzchar(txt$PDF), \", pdf\", "                                             
[323] "                    \"\"), \")\")))"                                                                             
[324] "                else NULL"                                                                                       
[325] "            }"                                                                                                   
[326] "            else readLines(f)"                                                                                   
[327] "        }"                                                                                                       
[328] "        for (i in which(file.exists(docFiles))) pkgInfo[[i]] <- readDocFile(docFiles[i])"                        
[329] "        y <- list(name = pkgName, path = pkgPath, info = pkgInfo)"                                               
[330] "        class(y) <- \"packageInfo\""                                                                             
[331] "        return(y)"                                                                                               
[332] "    }"                                                                                                           
[333] "    else {"                                                                                                      
[334] "        if (is.null(lib.loc)) "                                                                                  
[335] "            lib.loc <- .libPaths()"                                                                              
[336] "        db <- matrix(character(), nrow = 0L, ncol = 3L)"                                                         
[337] "        nopkgs <- character()"                                                                                   
[338] "        for (lib in lib.loc) {"                                                                                  
[339] "            a <- .packages(all.available = TRUE, lib.loc = lib)"                                                 
[340] "            for (i in sort(a)) {"                                                                                
[341] "                file <- system.file(\"Meta\", \"package.rds\", package = i, "                                    
[342] "                  lib.loc = lib)"                                                                                
[343] "                title <- if (nzchar(file)) {"                                                                    
[344] "                  txt <- readRDS(file)"                                                                          
[345] "                  if (is.list(txt)) "                                                                            
[346] "                    txt <- txt$DESCRIPTION"                                                                      
[347] "                  if (\"Encoding\" %in% names(txt)) {"                                                           
[348] "                    to <- if (Sys.getlocale(\"LC_CTYPE\") == \"C\") "                                            
[349] "                      \"ASCII//TRANSLIT\""                                                                       
[350] "                    else \"\""                                                                                   
[351] "                    tmp <- try(iconv(txt, txt[\"Encoding\"], to, "                                               
[352] "                      \"?\"))"                                                                                   
[353] "                    if (!inherits(tmp, \"try-error\")) "                                                         
[354] "                      txt <- tmp"                                                                                
[355] "                    else warning(\"'DESCRIPTION' has an 'Encoding' field and re-encoding is not possible\", "    
[356] "                      call. = FALSE)"                                                                            
[357] "                  }"                                                                                             
[358] "                  txt[\"Title\"]"                                                                                
[359] "                }"                                                                                               
[360] "                else NA"                                                                                         
[361] "                if (is.na(title)) "                                                                              
[362] "                  title <- \" ** No title available ** \""                                                       
[363] "                db <- rbind(db, cbind(i, lib, title))"                                                           
[364] "            }"                                                                                                   
[365] "            if (length(a) == 0L) "                                                                               
[366] "                nopkgs <- c(nopkgs, lib)"                                                                        
[367] "        }"                                                                                                       
[368] "        dimnames(db) <- list(NULL, c(\"Package\", \"LibPath\", \"Title\"))"                                      
[369] "        if (length(nopkgs) && !missing(lib.loc)) {"                                                              
[370] "            pkglist <- paste(sQuote(nopkgs), collapse = \", \")"                                                 
[371] "            msg <- sprintf(ngettext(length(nopkgs), \"library %s contains no packages\", "                       
[372] "                \"libraries %s contain no packages\"), pkglist)"                                                 
[373] "            warning(msg, domain = NA)"                                                                           
[374] "        }"                                                                                                       
[375] "        y <- list(header = NULL, results = db, footer = NULL)"                                                   
[376] "        class(y) <- \"libraryIQR\""                                                                              
[377] "        return(y)"                                                                                               
[378] "    }"                                                                                                           
[379] "    if (logical.return) "                                                                                        
[380] "        TRUE"                                                                                                    
[381] "    else invisible(.packages())"                                                                                 
[382] "}"                                                                                                               
